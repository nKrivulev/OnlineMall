<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .admin-container {
            max-width: 1000px;
            margin: 5rem auto;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .admin-container h1, h2 {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }

        th, td {
            padding: 0.75rem;
            border: 1px solid #ddd;
            text-align: left;
        }

        th {
            background-color: #f1f1f1;
        }

        tr:hover {
            background-color: #f9f9f9;
        }

        .back-link {
            text-align: center;
            margin-top: 2rem;
        }

        .back-link a {
            color: #007bff;
            text-decoration: none;
        }

        .back-link a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
<div id="navbar-container"></div>

<div class="admin-container">
    <h1>üëÆ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–µ–Ω –ø–∞–Ω–µ–ª</h1>
    <p style="text-align: center;">–°–∞–º–æ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —Å —Ä–æ–ª—è <strong>ADMIN</strong>.</p>

    <h2>üë§ –í—Å–∏—á–∫–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</h2>
    <table id="usersTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</th>
            <th>Email</th>
            <th>–†–æ–ª—è</th>
            <th>–ë–∞–ª–∞–Ω—Å</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>üè¨ –í—Å–∏—á–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∏</h2>
    <table id="storesTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>–ò–º–µ</th>
            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th>–°–æ–±—Å—Ç–≤–µ–Ω–∏–∫</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–ï—Ç–∞–∂</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>

    <div class="back-link">
        <a href="index.html">‚¨Ö –ù–∞–∑–∞–¥ –∫—ä–º –Ω–∞—á–∞–ª–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞</a>
    </div>
</div>

<script src="script.js"></script>
<script>
    fetch("navbar.html")
        .then(res => res.text())
        .then(data => {
            document.getElementById("navbar-container").innerHTML = data;
        });

    async function loadUsers() {
        const res = await fetch(`${API}/users`);
        const users = await res.json();
        const tbody = document.querySelector("#usersTable tbody");
        tbody.innerHTML = "";

        users.forEach(u => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${u.id}</td>
                <td>${u.username}</td>
                <td>${u.email}</td>
                <td>${u.role}</td>
                <td>${u.balance.toFixed(2)} –ª–≤.</td>
            `;
            tbody.appendChild(tr);
        });
    }

    async function loadStores() {
        const res = await fetch(`${API}/stores`);
        const stores = await res.json();
        const tbody = document.querySelector("#storesTable tbody");
        tbody.innerHTML = "";

        stores.forEach(s => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${s.id}</td>
                <td>${s.name}</td>
                <td>${s.description}</td>
                <td>${s.ownerUsername || "?"}</td>
                <td>${s.category}</td>
                <td>${s.floor}</td>
            `;
            tbody.appendChild(tr);
        });
    }

    loadUsers();
    loadStores();
</script>
</body>
</html>
