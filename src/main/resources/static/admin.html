<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- –ù–∞–≤–±–∞—Ä -->
<div id="navbar-container"></div>
<div class="container">
    <h1>üëÆ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–µ–Ω –ø–∞–Ω–µ–ª</h1>
    <p>–°–∞–º–æ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —Å —Ä–æ–ª—è <strong>ADMIN</strong>.</p>

    <hr>

    <h2>üë§ –í—Å–∏—á–∫–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</h2>
    <table id="usersTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</th>
            <th>Email</th>
            <th>–†–æ–ª—è</th>
            <th>–ë–∞–ª–∞–Ω—Å</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>

    <hr>

    <h2>üè¨ –í—Å–∏—á–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∏</h2>
    <table id="storesTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>–ò–º–µ</th>
            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th>–°–æ–±—Å—Ç–≤–µ–Ω–∏–∫</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–ï—Ç–∞–∂</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>

    <br>
    <a href="index.html">‚¨Ö –ù–∞–∑–∞–¥ –∫—ä–º –Ω–∞—á–∞–ª–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞</a>
</div>

<script src="script.js"></script>
<script>
    // –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –Ω–∞–≤–±–∞—Ä
    fetch("navbar.html")
        .then(res => res.text())
        .then(data => {
            document.getElementById("navbar-container").innerHTML = data;
        });

    async function loadUsers() {
        const res = await fetch(`${API}/users`);
        const users = await res.json();
        const tbody = document.querySelector("#usersTable tbody");
        tbody.innerHTML = "";

        users.forEach(u => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${u.id}</td>
                <td>${u.username}</td>
                <td>${u.email}</td>
                <td>${u.role}</td>
                <td>${u.balance.toFixed(2)} –ª–≤.</td>
            `;
            tbody.appendChild(tr);
        });
    }

    async function loadStores() {
        const res = await fetch(`${API}/stores`);
        const stores = await res.json();
        const tbody = document.querySelector("#storesTable tbody");
        tbody.innerHTML = "";

        stores.forEach(s => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${s.id}</td>
                <td>${s.name}</td>
                <td>${s.description}</td>
                <td>${s.ownerUsername || "?"}</td>
                <td>${s.category}</td>
                <td>${s.floor}</td>
            `;
            tbody.appendChild(tr);
        });
    }

    loadUsers();
    loadStores();
</script>

</body>
</html>
